/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: jetty/9.4.53.v20231009
 * Generated at: 2026-01-15 06:58:08 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.mycompany.onlineshoppingcart.model.Cart;
import com.mycompany.onlineshoppingcart.model.CartItem;
import com.mycompany.onlineshoppingcart.model.User;
import java.util.List;
import java.math.BigDecimal;

public final class checkout_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("java.math.BigDecimal");
    _jspx_imports_classes.add("java.util.List");
    _jspx_imports_classes.add("com.mycompany.onlineshoppingcart.model.User");
    _jspx_imports_classes.add("com.mycompany.onlineshoppingcart.model.Cart");
    _jspx_imports_classes.add("com.mycompany.onlineshoppingcart.model.CartItem");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");

    Cart cart = (Cart) session.getAttribute("cart");
    User user = (User) session.getAttribute("user");

      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html lang=\"en\">\r\n");
      out.write("<head>\r\n");
      out.write("    <meta charset=\"UTF-8\">\r\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n");
      out.write("    <title>Checkout - Fashion Store</title>\r\n");
      out.write("    <!-- Google Fonts -->\r\n");
      out.write("    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n");
      out.write("    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n");
      out.write("    <link href=\"https://fonts.googleapis.com/css2?family=Belleza&family=Tinos:ital,wght@0,400;0,700;1,400&family=Smooch+Sans:wght@100..1000&display=swap\" rel=\"stylesheet\">\r\n");
      out.write("    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/style.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/checkout.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/notifications.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/validation.css\">\r\n");
      out.write("</head>\r\n");
      out.write("<body class=\"checkout-page\">\r\n");
      out.write("    ");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "header.jsp", out, false);
      out.write("\r\n");
      out.write("    \r\n");
      out.write("    <div class=\"checkout-container\">\r\n");
      out.write("        ");

            if (user == null) {
        
      out.write("\r\n");
      out.write("        <div class=\"checkout-empty\">\r\n");
      out.write("            <div class=\"empty-content\">\r\n");
      out.write("                <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                    <path d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                    <path d=\"M12 8V12M12 16H12.01\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                </svg>\r\n");
      out.write("                <h2>Please Login</h2>\r\n");
      out.write("                <p>You need to be logged in to checkout</p>\r\n");
      out.write("                <a href=\"login.jsp\" class=\"btn btn-primary\">Login</a>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("        ");

            } else if (cart == null || cart.getItems().isEmpty()) {
        
      out.write("\r\n");
      out.write("        <div class=\"checkout-empty\">\r\n");
      out.write("            <div class=\"empty-content\">\r\n");
      out.write("                <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                    <path d=\"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H19M17 13V17C17 18.1 17.9 19 19 19C20.1 19 21 18.1 21 17V13M9 19.5C9.8 19.5 10.5 20.2 10.5 21C10.5 21.8 9.8 22.5 9 22.5C8.2 22.5 7.5 21.8 7.5 21C7.5 20.2 8.2 19.5 9 19.5ZM20 19.5C20.8 19.5 21.5 20.2 21.5 21C21.5 21.8 20.8 22.5 20 22.5C19.2 22.5 18.5 21.8 18.5 21C18.5 20.2 19.2 19.5 20 19.5Z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                </svg>\r\n");
      out.write("                <h2>Your Cart is Empty</h2>\r\n");
      out.write("                <p>Add some items to your cart before checkout</p>\r\n");
      out.write("                <a href=\"products\" class=\"btn btn-primary\">Continue Shopping</a>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("        ");

            } else {
                BigDecimal subtotal = cart.getTotal();
                BigDecimal shipping = subtotal.doubleValue() > 100 ? BigDecimal.ZERO : new BigDecimal("10.00");
                BigDecimal tax = subtotal.multiply(new BigDecimal("0.08")); // 8% tax
                BigDecimal total = subtotal.add(shipping).add(tax);
        
      out.write("\r\n");
      out.write("        <div class=\"checkout-layout\">\r\n");
      out.write("            <!-- Order Summary Section - Left Side -->\r\n");
      out.write("            <div class=\"checkout-summary-section\">\r\n");
      out.write("                <div class=\"summary-header\">\r\n");
      out.write("                    <h2>Pay Fashion Store</h2>\r\n");
      out.write("                    <div class=\"summary-total-amount\">$");
      out.print( String.format("%.2f", total) );
      out.write("</div>\r\n");
      out.write("                </div>\r\n");
      out.write("                \r\n");
      out.write("                <div class=\"summary-card\">\r\n");
      out.write("                    <h2 class=\"summary-title\">Order Summary</h2>\r\n");
      out.write("                    \r\n");
      out.write("                    <div class=\"order-items\">\r\n");
      out.write("                        ");

                            for (CartItem item : cart.getItems()) {
                                String imageUrl = item.getProduct().getImageUrl() != null && !item.getProduct().getImageUrl().isEmpty() 
                                    ? item.getProduct().getImageUrl() 
                                    : "https://via.placeholder.com/80x80?text=No+Image";
                        
      out.write("\r\n");
      out.write("                        <div class=\"order-item\">\r\n");
      out.write("                            <div class=\"order-item-image\">\r\n");
      out.write("                                <img src=\"");
      out.print( imageUrl );
      out.write("\" alt=\"");
      out.print( item.getProduct().getName() );
      out.write("\">\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"order-item-details\">\r\n");
      out.write("                                <h4>");
      out.print( item.getProduct().getName() );
      out.write("</h4>\r\n");
      out.write("                                <p>Qty: ");
      out.print( item.getQuantity() );
      out.write("</p>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"order-item-price\">\r\n");
      out.write("                                $");
      out.print( String.format("%.2f", item.getSubtotal()) );
      out.write("\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        ");

                            }
                        
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                    \r\n");
      out.write("                    <div class=\"summary-totals\">\r\n");
      out.write("                        <div class=\"summary-row\">\r\n");
      out.write("                            <span>Subtotal</span>\r\n");
      out.write("                            <span>$");
      out.print( String.format("%.2f", subtotal) );
      out.write("</span>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"summary-row\">\r\n");
      out.write("                            <span>Shipping</span>\r\n");
      out.write("                            <span>");
      out.print( shipping.doubleValue() == 0 ? "Free" : "$" + String.format("%.2f", shipping) );
      out.write("</span>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"summary-row\">\r\n");
      out.write("                            <span>Tax</span>\r\n");
      out.write("                            <span>$");
      out.print( String.format("%.2f", tax) );
      out.write("</span>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"summary-row summary-total\">\r\n");
      out.write("                            <span>Total</span>\r\n");
      out.write("                            <span>$");
      out.print( String.format("%.2f", total) );
      out.write("</span>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            \r\n");
      out.write("            <!-- Checkout Form Section - Right Side -->\r\n");
      out.write("            <div class=\"checkout-form-section\">\r\n");
      out.write("                <div class=\"checkout-header\">\r\n");
      out.write("                    <h1 class=\"checkout-title\">Checkout</h1>\r\n");
      out.write("                    <p class=\"checkout-subtitle\">Complete your order</p>\r\n");
      out.write("                </div>\r\n");
      out.write("                \r\n");
      out.write("                ");
 if (request.getAttribute("error") != null) { 
      out.write("\r\n");
      out.write("                    <div class=\"error-message\">\r\n");
      out.write("                        ");
      out.print( request.getAttribute("error") );
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                ");
 } 
      out.write("\r\n");
      out.write("                \r\n");
      out.write("                <form action=\"checkout\" method=\"post\" class=\"checkout-form\" id=\"checkoutForm\">\r\n");
      out.write("                    <div class=\"form-layout-grid\">\r\n");
      out.write("                        <!-- Left Column - Shipping Information -->\r\n");
      out.write("                        <div class=\"form-column-left\">\r\n");
      out.write("                            <div class=\"form-section\">\r\n");
      out.write("                                <div class=\"section-header\">\r\n");
      out.write("                                    <svg class=\"section-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                                        <path d=\"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                                        <path d=\"M9 22V12H15V22\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                                    </svg>\r\n");
      out.write("                                    <h2 class=\"section-title\">Shipping Address</h2>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                \r\n");
      out.write("                                <div class=\"form-group\">\r\n");
      out.write("                                    <label for=\"fullName\" class=\"form-label\">Full Name</label>\r\n");
      out.write("                                    <input type=\"text\" id=\"fullName\" name=\"fullName\" class=\"form-input\" \r\n");
      out.write("                                           value=\"");
      out.print( (user.getFirstName() != null ? user.getFirstName() : "") + " " + (user.getLastName() != null ? user.getLastName() : "") );
      out.write("\" \r\n");
      out.write("                                           placeholder=\"Enter your full name\" required>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                \r\n");
      out.write("                                <div class=\"form-group\">\r\n");
      out.write("                                    <label for=\"shippingAddress\" class=\"form-label\">Shipping Address</label>\r\n");
      out.write("                                    <textarea id=\"shippingAddress\" name=\"shippingAddress\" class=\"form-input form-textarea\" \r\n");
      out.write("                                              rows=\"4\" placeholder=\"Enter your complete shipping address\" required>");
      out.print( user.getAddress() != null ? user.getAddress() : "" );
      out.write("</textarea>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                \r\n");
      out.write("                                <div class=\"form-row\">\r\n");
      out.write("                                    <div class=\"form-group\">\r\n");
      out.write("                                        <label for=\"city\" class=\"form-label\">City</label>\r\n");
      out.write("                                        <input type=\"text\" id=\"city\" name=\"city\" class=\"form-input\" placeholder=\"City\" required>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <div class=\"form-group\">\r\n");
      out.write("                                        <label for=\"zipCode\" class=\"form-label\">Zip Code</label>\r\n");
      out.write("                                        <input type=\"text\" id=\"zipCode\" name=\"zipCode\" class=\"form-input\" placeholder=\"Zip Code\" required>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                \r\n");
      out.write("                                <div class=\"form-group\">\r\n");
      out.write("                                    <label for=\"phone\" class=\"form-label\">Phone Number</label>\r\n");
      out.write("                                    <input type=\"tel\" id=\"phone\" name=\"phone\" class=\"form-input\" \r\n");
      out.write("                                           value=\"");
      out.print( user.getPhone() != null ? user.getPhone() : "" );
      out.write("\" \r\n");
      out.write("                                           placeholder=\"Enter your phone number\" required>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        \r\n");
      out.write("                        <!-- Right Column - Payment Method -->\r\n");
      out.write("                        <div class=\"form-column-right\">\r\n");
      out.write("                            <div class=\"form-section\">\r\n");
      out.write("                                <div class=\"section-header\">\r\n");
      out.write("                                    <svg class=\"section-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                                        <rect x=\"1\" y=\"4\" width=\"22\" height=\"16\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n");
      out.write("                                        <path d=\"M1 10H23\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n");
      out.write("                                    </svg>\r\n");
      out.write("                                    <h2 class=\"section-title\">Payment Method</h2>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                \r\n");
      out.write("                                <div class=\"payment-methods\">\r\n");
      out.write("                                    <label class=\"payment-option\">\r\n");
      out.write("                                        <input type=\"radio\" name=\"paymentMethod\" value=\"credit\" checked>\r\n");
      out.write("                                        <div class=\"payment-card\">\r\n");
      out.write("                                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                                                <rect x=\"1\" y=\"4\" width=\"22\" height=\"16\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n");
      out.write("                                                <path d=\"M1 10H23\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n");
      out.write("                                            </svg>\r\n");
      out.write("                                            <span>Credit Card</span>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </label>\r\n");
      out.write("                                    \r\n");
      out.write("                                    <label class=\"payment-option\">\r\n");
      out.write("                                        <input type=\"radio\" name=\"paymentMethod\" value=\"debit\">\r\n");
      out.write("                                        <div class=\"payment-card\">\r\n");
      out.write("                                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                                                <rect x=\"1\" y=\"4\" width=\"22\" height=\"16\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n");
      out.write("                                                <path d=\"M1 10H23\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n");
      out.write("                                            </svg>\r\n");
      out.write("                                            <span>Debit Card</span>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </label>\r\n");
      out.write("                                    \r\n");
      out.write("                                    <label class=\"payment-option\">\r\n");
      out.write("                                        <input type=\"radio\" name=\"paymentMethod\" value=\"paypal\">\r\n");
      out.write("                                        <div class=\"payment-card\">\r\n");
      out.write("                                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                                                <path d=\"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                                                <path d=\"M8 12L10.5 14.5L16 9\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                                            </svg>\r\n");
      out.write("                                            <span>PayPal</span>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </label>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            \r\n");
      out.write("                            <button type=\"submit\" class=\"checkout-btn\" id=\"checkoutBtn\">\r\n");
      out.write("                                <span>Place Order</span>\r\n");
      out.write("                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n");
      out.write("                                    <path d=\"M5 12H19M19 12L12 5M19 12L12 19\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n");
      out.write("                                </svg>\r\n");
      out.write("                            </button>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </form>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("        ");

            }
        
      out.write("\r\n");
      out.write("    </div>\r\n");
      out.write("    \r\n");
      out.write("    ");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "footer.jsp", out, false);
      out.write("\r\n");
      out.write("    \r\n");
      out.write("    <script src=\"js/notifications.js\"></script>\r\n");
      out.write("    <script src=\"js/validation.js\"></script>\r\n");
      out.write("    <script src=\"js/checkout.js\"></script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
