/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: jetty/9.4.53.v20231009
 * Generated at: 2026-01-15 06:55:11 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.mycompany.onlineshoppingcart.model.User;
import com.mycompany.onlineshoppingcart.model.Cart;
import com.mycompany.onlineshoppingcart.model.CartItem;

public final class header_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("com.mycompany.onlineshoppingcart.model.User");
    _jspx_imports_classes.add("com.mycompany.onlineshoppingcart.model.Cart");
    _jspx_imports_classes.add("com.mycompany.onlineshoppingcart.model.CartItem");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");

    User user = (User) session.getAttribute("user");
    Cart cart = (Cart) session.getAttribute("cart");
    int cartItemCount = (cart != null) ? cart.getTotalItems() : 0;

      out.write("\n");
      out.write("<header class=\"main-header\">\n");
      out.write("    <nav class=\"navbar\">\n");
      out.write("        <div class=\"nav-container\">\n");
      out.write("            <div class=\"logo\">\n");
      out.write("                <a href=\"index.jsp\">\n");
      out.write("                    <span class=\"logo-text\">Fashion</span>\n");
      out.write("                    <span class=\"logo-accent\">Store</span>\n");
      out.write("                </a>\n");
      out.write("            </div>\n");
      out.write("            \n");
      out.write("            <ul class=\"nav-menu\" id=\"navMenu\">\n");
      out.write("                <li class=\"nav-item\">\n");
      out.write("                    <a href=\"index.jsp\" class=\"nav-link\">Home</a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"nav-item\">\n");
      out.write("                    <a href=\"products\" class=\"nav-link\">Products</a>\n");
      out.write("                </li>\n");
      out.write("                ");

                    if (user != null) {
                
      out.write("\n");
      out.write("                <li class=\"nav-item cart-dropdown-wrapper\">\n");
      out.write("                    <a href=\"cart\" class=\"nav-link cart-link\">\n");
      out.write("                        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n");
      out.write("                            <path d=\"M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H19M17 13V17C17 18.1 17.9 19 19 19C20.1 19 21 18.1 21 17V13M9 19.5C9.8 19.5 10.5 20.2 10.5 21C10.5 21.8 9.8 22.5 9 22.5C8.2 22.5 7.5 21.8 7.5 21C7.5 20.2 8.2 19.5 9 19.5ZM20 19.5C20.8 19.5 21.5 20.2 21.5 21C21.5 21.8 20.8 22.5 20 22.5C19.2 22.5 18.5 21.8 18.5 21C18.5 20.2 19.2 19.5 20 19.5Z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n");
      out.write("                        </svg>\n");
      out.write("                        <span class=\"cart-text\">Cart</span>\n");
      out.write("                        <span class=\"cart-badge\">");
      out.print( cartItemCount );
      out.write("</span>\n");
      out.write("                    </a>\n");
      out.write("                    <div class=\"cart-dropdown\" id=\"cartDropdown\">\n");
      out.write("                        <div class=\"cart-dropdown-header\">\n");
      out.write("                            <h3>Shopping Cart</h3>\n");
      out.write("                            <span class=\"cart-item-count\">");
      out.print( cartItemCount );
      out.write(" item");
      out.print( cartItemCount != 1 ? "s" : "" );
      out.write("</span>\n");
      out.write("                        </div>\n");
      out.write("                        <div class=\"cart-dropdown-items\">\n");
      out.write("                            ");

                                if (cart != null && !cart.getItems().isEmpty()) {
                                    int displayLimit = 3;
                                    int count = 0;
                                    for (CartItem item : cart.getItems()) {
                                        if (count >= displayLimit) break;
                            
      out.write("\n");
      out.write("                            <div class=\"cart-dropdown-item\">\n");
      out.write("                                <div class=\"cart-item-image\">\n");
      out.write("                                    ");
 if (item.getProduct().getImageUrl() != null && !item.getProduct().getImageUrl().isEmpty()) { 
      out.write("\n");
      out.write("                                        <img src=\"");
      out.print( item.getProduct().getImageUrl() );
      out.write("\" alt=\"");
      out.print( item.getProduct().getName() );
      out.write("\">\n");
      out.write("                                    ");
 } else { 
      out.write("\n");
      out.write("                                        <div class=\"cart-item-placeholder\">No Image</div>\n");
      out.write("                                    ");
 } 
      out.write("\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"cart-item-details\">\n");
      out.write("                                    <h4>");
      out.print( item.getProduct().getName() );
      out.write("</h4>\n");
      out.write("                                    <p class=\"cart-item-quantity\">Qty: ");
      out.print( item.getQuantity() );
      out.write("</p>\n");
      out.write("                                    <p class=\"cart-item-price\">$");
      out.print( String.format("%.2f", item.getSubtotal()) );
      out.write("</p>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                            ");

                                        count++;
                                    }
                                    if (cart.getItems().size() > displayLimit) {
                            
      out.write("\n");
      out.write("                            <div class=\"cart-dropdown-more\">\n");
      out.write("                                <p>+");
      out.print( cart.getItems().size() - displayLimit );
      out.write(" more item");
      out.print( (cart.getItems().size() - displayLimit) != 1 ? "s" : "" );
      out.write("</p>\n");
      out.write("                            </div>\n");
      out.write("                            ");

                                    }
                                } else {
                            
      out.write("\n");
      out.write("                            <div class=\"cart-dropdown-empty\">\n");
      out.write("                                <p>Your cart is empty</p>\n");
      out.write("                            </div>\n");
      out.write("                            ");

                                }
                            
      out.write("\n");
      out.write("                        </div>\n");
      out.write("                        ");

                            if (cart != null && !cart.getItems().isEmpty()) {
                        
      out.write("\n");
      out.write("                        <div class=\"cart-dropdown-footer\">\n");
      out.write("                            <div class=\"cart-dropdown-total\">\n");
      out.write("                                <span>Total:</span>\n");
      out.write("                                <span class=\"cart-total-amount\">$");
      out.print( String.format("%.2f", cart.getTotal()) );
      out.write("</span>\n");
      out.write("                            </div>\n");
      out.write("                            <a href=\"cart\" class=\"btn-view-cart\">View Cart</a>\n");
      out.write("                            <a href=\"checkout\" class=\"btn-checkout\">Checkout</a>\n");
      out.write("                        </div>\n");
      out.write("                        ");

                            } else {
                        
      out.write("\n");
      out.write("                        <div class=\"cart-dropdown-footer\">\n");
      out.write("                            <a href=\"products\" class=\"btn-view-cart\">Start Shopping</a>\n");
      out.write("                        </div>\n");
      out.write("                        ");

                            }
                        
      out.write("\n");
      out.write("                    </div>\n");
      out.write("                </li>\n");
      out.write("                ");

                    }
                
      out.write("\n");
      out.write("                ");

                    if (user != null) {
                
      out.write("\n");
      out.write("                <li class=\"nav-item\">\n");
      out.write("                    <a href=\"orders\" class=\"nav-link\">Orders</a>\n");
      out.write("                </li>\n");
      out.write("                ");

                        if ("admin".equals(user.getRole())) {
                
      out.write("\n");
      out.write("                <li class=\"nav-item\">\n");
      out.write("                    <a href=\"admin-products.jsp\" class=\"nav-link admin-link\">Admin</a>\n");
      out.write("                </li>\n");
      out.write("                ");

                        }
                
      out.write("\n");
      out.write("                <li class=\"nav-item dropdown\">\n");
      out.write("                    <a href=\"#\" class=\"nav-link user-link\">\n");
      out.write("                        <span class=\"user-name\">");
      out.print( (user.getFirstName() != null && !user.getFirstName().isEmpty()) ? user.getFirstName() : user.getUsername() );
      out.write("</span>\n");
      out.write("                        <svg class=\"dropdown-icon\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\">\n");
      out.write("                            <path d=\"M2 4L6 8L10 4\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n");
      out.write("                        </svg>\n");
      out.write("                    </a>\n");
      out.write("                    <ul class=\"dropdown-menu\">\n");
      out.write("                        <li><a href=\"logout\" class=\"dropdown-item\">Logout</a></li>\n");
      out.write("                    </ul>\n");
      out.write("                </li>\n");
      out.write("                ");

                    } else {
                
      out.write("\n");
      out.write("                <li class=\"nav-item\">\n");
      out.write("                    <a href=\"login.jsp\" class=\"nav-link\">Login</a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"nav-item\">\n");
      out.write("                    <a href=\"register.jsp\" class=\"nav-link nav-btn\">Sign Up</a>\n");
      out.write("                </li>\n");
      out.write("                ");

                    }
                
      out.write("\n");
      out.write("            </ul>\n");
      out.write("            \n");
      out.write("            <button class=\"hamburger\" id=\"hamburger\" aria-label=\"Toggle menu\">\n");
      out.write("                <span></span>\n");
      out.write("                <span></span>\n");
      out.write("                <span></span>\n");
      out.write("            </button>\n");
      out.write("        </div>\n");
      out.write("    </nav>\n");
      out.write("</header>\n");
      out.write("<script>\n");
      out.write("// Mobile Hamburger Menu - Works on all pages\n");
      out.write("(function() {\n");
      out.write("    const hamburger = document.getElementById('hamburger');\n");
      out.write("    const navMenu = document.getElementById('navMenu');\n");
      out.write("    \n");
      out.write("    if (hamburger && navMenu) {\n");
      out.write("        hamburger.addEventListener('click', function() {\n");
      out.write("            hamburger.classList.toggle('active');\n");
      out.write("            navMenu.classList.toggle('active');\n");
      out.write("            document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';\n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        // Close menu when clicking on a link\n");
      out.write("        const navLinks = navMenu.querySelectorAll('.nav-link');\n");
      out.write("        navLinks.forEach(function(link) {\n");
      out.write("            link.addEventListener('click', function() {\n");
      out.write("                hamburger.classList.remove('active');\n");
      out.write("                navMenu.classList.remove('active');\n");
      out.write("                document.body.style.overflow = '';\n");
      out.write("            });\n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        // Close menu when clicking outside\n");
      out.write("        document.addEventListener('click', function(e) {\n");
      out.write("            if (!hamburger.contains(e.target) && !navMenu.contains(e.target) && navMenu.classList.contains('active')) {\n");
      out.write("                hamburger.classList.remove('active');\n");
      out.write("                navMenu.classList.remove('active');\n");
      out.write("                document.body.style.overflow = '';\n");
      out.write("            }\n");
      out.write("        });\n");
      out.write("    }\n");
      out.write("    \n");
      out.write("    // Header scroll effect\n");
      out.write("    window.addEventListener('scroll', function() {\n");
      out.write("        const header = document.querySelector('.main-header');\n");
      out.write("        if (header) {\n");
      out.write("            if (window.scrollY > 50) {\n");
      out.write("                header.classList.add('scrolled');\n");
      out.write("            } else {\n");
      out.write("                header.classList.remove('scrolled');\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("    }, { passive: true });\n");
      out.write("    \n");
      out.write("    // Update cart badge on page load\n");
      out.write("    function updateCartBadge() {\n");
      out.write("        // This will be updated via server-side rendering\n");
      out.write("        // For dynamic updates, you can use AJAX to fetch cart count\n");
      out.write("    }\n");
      out.write("    \n");
      out.write("    updateCartBadge();\n");
      out.write("})();\n");
      out.write("</script>\n");
      out.write("<script src=\"js/modal.js\"></script>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
